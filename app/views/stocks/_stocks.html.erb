<%= turbo_frame_tag "stocks" do %>
  <table class="table table-striped table-bordered table-hover">
    <thead class="thead-dark">
      <tr>
        <th id="stocks-symbol"><%= sort_link(column: "general.Code", label: "Symbol") %></th>
        <th id="stocks-name"><%= sort_link(column: "general.Company_name", label: "Company Name") %></th>
        <th id="stocks-sector"><%= sort_link(column: "general.Sector", label: "Sector") %></th>
        <th id="stocks-industry"><%= sort_link(column: "general.Industry", label: "Industry") %></th>
        <th id="stocks-profit-margin"><%= sort_link(column: "Profit_margin", label: "Profit Margin") %></th>
      </tr>
    </thead>

    <tbody>
  <div id="stocks">
        <% @stocks.each do |stock| %>
          <tr>
            <td><%= link_to stock.general["Code"], stock_path(stock), data: { turbo: false } %></td>
            <td><%= stock.general["Name"] %></td>
            <td><%= stock.general["Sector"] %></td>
            <td><%= stock.general["Industry"] %></td>
            <td><%= number_to_percentage(stock.highlights["ProfitMargin"] * 100, precision: 2) %></td>
            <td><center><%= link_to 'Edit', edit_stock_path(stock), class: "btn btn-secondary" %></center></td>
            <td><center><%= link_to 'Delete', stock_path(stock), data: { turbo_method: :delete }, class: "btn btn-danger" %></center></td>
          </tr>
        <% end %>
      </div>
    </tbody>
  </table>
<% end %>